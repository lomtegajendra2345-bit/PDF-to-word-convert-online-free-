<input type="file" id="pdfFile" accept="application/pdf" />
<button onclick="convertPDF()">Convert</button>

<p id="status"></p>

<script>
async function convertPDF() {
  const fileInput = document.getElementById("pdfFile");
  const status = document.getElementById("status");

  if (!fileInput.files.length) {
    status.innerText = "Please select a file";
    return;
  }

  const formData = new FormData();
  formData.append("file", fileInput.files[0]);

  status.innerText = "Converting...";

  const response = await fetch("/api/convert", {
    method: "POST",
    body: formData
  });

  if (!response.ok) {
    status.innerText = "Conversion failed ❌";
    return;
  }

  const blob = await response.blob();
  const url = window.URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = "converted.docx";
  a.click();

  status.innerText = "Download ready ✅";
}
</script>
